<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoWorld - Your Premium Car Destination</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
</head>
<body>
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <a href="#"><img src="AUTORVA 2.png" alt="Logo"></a>
            </div>
            <nav class="nav-menu">
                <ul class="nav-list">
                    <li><a href="index.html" class="nav-link">Home</a></li>
                    <li><a href="models.html" class="nav-link">Models</a></li>
                    <li><a href="performance.html" class="nav-link">Performance</a></li>
                    <li><a href="gallery.html" class="nav-link">Gallery</a></li>
                    <li><a href="contact.html" class="nav-link">Contact</a></li>
                </ul>
            </nav>
            <div class="nav-buttons">
                <a href="signup.html" class="signup-btn" title="Sign Up">
                    <i class="fas fa-user-plus"></i> <span>Sign Up</span>
                </a>
                <a href="login.html" class="login-btn" id="loginBtn" title="Login">
                    <div class="profile-pic-container" style="display: none;">
                        <img src="" alt="Profile Picture" id="userProfilePic">
                        <div class="profile-pic-overlay">
                            <label for="profilePicUpload" class="upload-btn" title="Change Profile Picture">
                                <i class="fas fa-camera"></i>
                            </label>
                            <input type="file" id="profilePicUpload" accept="image/*" style="display: none;" title="Upload Profile Picture">
                        </div>
                    </div>
                    <div class="user-info" style="display: none;">
                        <span class="user-name" id="userName"></span>
                        <span class="user-email" id="userEmail"></span>
                    </div>
                    <i class="fas fa-user"></i> <span id="loginText">Login</span>
                </a>
                <button class="search-btn" title="Search"><i class="fas fa-search"></i></button>
                <button class="menu-btn" title="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>
    
    <div class="hero-section">
        <canvas id="canvas"></canvas>
    </div>

    <section class="marketplace-section">
        <div class="marketplace-container">
            <div class="marketplace-header">
                <h2>Premium Car Marketplace</h2>
                <div class="marketplace-actions">
                    <button class="sell-car-btn" id="sellCarBtn">
                        <i class="fas fa-car"></i> Sell Your Car
                    </button>
                    <div class="user-actions">
                        <button class="wishlist-btn" id="wishlistBtn">
                            <i class="fas fa-heart"></i>
                            <span class="wishlist-count">0</span>
                        </button>
                        <button class="cart-btn" id="cartBtn">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count">0</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="car-filters">
                <select class="filter-select" id="brandFilter">
                    <option value="">All Brands</option>
                    <option value="bmw">BMW</option>
                    <option value="mercedes">Mercedes</option>
                    <option value="audi">Audi</option>
                </select>
                <select class="filter-select" id="priceFilter">
                    <option value="">Price Range</option>
                    <option value="0-50000">$0 - $50,000</option>
                    <option value="50000-100000">$50,000 - $100,000</option>
                    <option value="100000+">$100,000+</option>
                </select>
                <select class="filter-select" id="yearFilter">
                    <option value="">Year</option>
                    <option value="2024">2024</option>
                    <option value="2023">2023</option>
                    <option value="2022">2022</option>
                </select>
            </div>

            <div class="car-listings" id="carListings">
                <!-- Car listings will be dynamically added here -->     
            </div>
        </div>
    </section>

    <!-- Sell Car Modal -->
    <div class="modal" id="sellCarModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>List Your Car for Sale</h2>
            <form id="sellCarForm">  
                <div class="form-group">
                    <label for="carBrand">Car Brand (e.g., BMW, Mercedes, Audi)</label>
                    <input type="text" id="carBrand" required placeholder="Enter car brand">
                </div>
                <div class="form-group">
                    <label for="carModel">Car Model (e.g., M5, C-Class, A4)</label>
                    <input type="text" id="carModel" required placeholder="Enter car model">
                </div>
                <div class="form-group">
                    <label for="carYear">Manufacturing Year</label>
                    <input type="number" id="carYear" required min="1900" max="2024" placeholder="Enter year (e.g., 2024)">
                </div>
                <div class="form-group">
                    <label for="carPrice">Asking Price (in USD)</label>
                    <input type="number" id="carPrice" required min="1000" placeholder="Enter price">
                </div>
                <div class="form-group">
                    <label for="carMileage">Mileage (in kilometers)</label>
                    <input type="number" id="carMileage" required min="0" placeholder="Enter mileage">
                </div>
                <div class="form-group">
                    <label for="carColor">Car Color</label>
                    <input type="text" id="carColor" required placeholder="Enter car color">
                </div>
                <div class="form-group">
                    <label for="carDescription">Detailed Description</label>
                    <textarea id="carDescription" required placeholder="Describe your car's condition, features, and any additional information"></textarea>
                </div>
                <div class="form-group">
                    <label for="carImages">Car Images (Upload multiple images)</label>
                    <input type="file" id="carImages" multiple accept="image/*" required>
                    <small>Upload clear images of your car from different angles</small>
                </div>
                <div class="form-group">
                    <label for="sellerContact">Contact Information</label>
                    <input type="tel" id="sellerContact" required placeholder="Enter your phone number">
                </div>
                <button type="submit" class="submit-btn">List Car for Sale</button>
            </form>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Complete Your Purchase</h2>
            <div class="payment-summary">
                <h3>Order Summary</h3>
                <div id="paymentItems"></div>
                <div class="payment-total">
                    <h4>Total Amount: $<span id="paymentTotal">0</span></h4>
                </div>
            </div>
            <form id="paymentForm">
                <div class="form-group">
                    <label for="cardName">Cardholder Name</label>
                    <input type="text" id="cardName" required placeholder="Name on card">
                </div>
                <div class="form-group">
                    <label for="cardNumber">Card Number</label>
                    <input type="text" id="cardNumber" required placeholder="1234 5678 9012 3456" maxlength="19">
                </div>
                <div class="payment-row">
                    <div class="form-group">
                        <label for="expiryDate">Expiry Date</label>
                        <input type="text" id="expiryDate" required placeholder="MM/YY" maxlength="5">
                    </div>
                    <div class="form-group">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" required placeholder="123" maxlength="3">
                    </div>
                </div>
                <div class="form-group">
                    <label for="billingAddress">Billing Address</label>
                    <textarea id="billingAddress" required placeholder="Enter your billing address"></textarea>
                </div>
                <button type="submit" class="submit-btn">Pay Now</button>
            </form>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content success-content">
            <i class="fas fa-check-circle"></i>
            <h2>Payment Successful!</h2>
            <p>Your order has been confirmed. We'll contact you shortly with the delivery details.</p>
            <button class="close-success-btn">Continue Shopping</button>
        </div>
    </div>

    <!-- Wishlist Modal -->
    <div class="modal" id="wishlistModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Your Wishlist</h2>
            <div class="wishlist-items" id="wishlistItems">
                <!-- Wishlist items will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Your Cart</h2>
            <div class="cart-items" id="cartItems">
                <!-- Cart items will be dynamically added here -->
            </div>
            <div class="cart-total">
                <h3>Total: $<span id="cartTotal">0</span></h3>
                <button class="checkout-btn">Proceed to Checkout</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="login-container">
                <div class="login-header">
                    <h2>Welcome Back</h2>
                    <p>Please login to your account</p>
                </div>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">Email Address</label>
                        <input type="email" id="loginEmail" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required placeholder="Enter your password">
                    </div>
                    <div class="form-options">
                        <label class="remember-me">
                            <input type="checkbox" id="rememberMe">
                            <span>Remember me</span>
                        </label>
                        <a href="#" class="forgot-password">Forgot Password?</a>
                    </div>
                    <button type="submit" class="login-submit-btn">Login</button>
                </form>
                <div class="login-footer">
                    <p>Don't have an account? <a href="#" id="showRegister">Register</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="register-container">
                <div class="register-header">
                    <h2>Create Account</h2>
                    <p>Join our premium car marketplace</p>
                </div>
                <form id="registerForm">
                    <div class="form-group">
                        <label for="registerName">Full Name</label>
                        <input type="text" id="registerName" required placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email Address</label>
                        <input type="email" id="registerEmail" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required placeholder="Create a password">
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" required placeholder="Confirm your password">
                    </div>
                    <div class="form-group">
                        <label class="terms-checkbox">
                            <input type="checkbox" id="agreeTerms" required>
                            <span>I agree to the <a href="#">Terms & Conditions</a></span>
                        </label>
                    </div>
                    <button type="submit" class="register-submit-btn">Create Account</button>
                </form>
                <div class="register-footer">
                    <p>Already have an account? <a href="#" id="showLogin">Login</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Email Verification Modal -->
    <div class="modal" id="verificationModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="verification-container">
                <div class="verification-header">
                    <i class="fas fa-envelope"></i>
                    <h2>Verify Your Email</h2>
                    <p>We've sent a verification code to your email</p>
                </div>
                <form id="verificationForm">
                    <div class="verification-code">
                        <input type="text" maxlength="1" pattern="[0-9]" required>
                        <input type="text" maxlength="1" pattern="[0-9]" required>
                        <input type="text" maxlength="1" pattern="[0-9]" required>
                        <input type="text" maxlength="1" pattern="[0-9]" required>
                        <input type="text" maxlength="1" pattern="[0-9]" required>
                        <input type="text" maxlength="1" pattern="[0-9]" required>
                    </div>
                    <p class="verification-timer">Code expires in: <span id="verificationTimer">05:00</span></p>
                    <button type="submit" class="verify-submit-btn">Verify Email</button>
                    <button type="button" class="resend-code-btn">Resend Code</button>
                    
                </form>
            </div>
        </div>
    </div>

    <!-- Luxury Performance Car Showcase -->
    <section class="scroll-showcase">
        <div class="showcase-container">
            <h2>Luxury Performance</h2>
            
            <!-- BMW M5 -->
            <div class="car-showcase-item">
                <div class="car-content">
                    <div class="car-info">
                        <h3>BMW M5 Competition</h3>
                        <div class="specs">
                            <div class="spec">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>617 HP</span>
                            </div>
                            <div class="spec">
                                <i class="fas fa-bolt"></i>
                                <span>750 Nm</span>
                            </div>
                            <div class="spec">
                                <i class="fas fa-stopwatch"></i>
                                <span>3.1s</span>
                            </div>
                            <div class="spec">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>305 km/h</span>
                            </div>
                        </div>
                        <div class="engine-info">
                            <h4>Engine Specifications</h4>
                            <ul>
                                <li>4.4L Twin-Turbo V8</li>
                                <li>8-Speed M Steptronic</li>
                                <li>M xDrive All-Wheel Drive</li>
                            </ul>
                        </div>
                        <button class="test-drive-btn" data-car="BMW M5 Competition">
                            <i class="fas fa-car-side"></i> Book Test Drive
                        </button>
                    </div>
                    <div class="car-image">
                        <img src="https://imgd.aeplcdn.com/1920x1080/n/cw/ec/192747/m5-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80&q=80" alt="BMW M5">
                    </div>
                </div>
            </div>

            <!-- Mercedes-Benz S-Class -->
            <div class="car-showcase-item">
                <div class="car-content">
                    <div class="car-info">
                        <h3>Mercedes-Benz S-Class</h3>
                        <div class="specs">
                            <div class="spec">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>429 HP</span>
                            </div>
                            <div class="spec">
                                <i class="fas fa-bolt"></i>
                                <span>520 Nm</span>
                            </div>
                            <div class="spec">
                                <i class="fas fa-stopwatch"></i>
                                <span>4.9s</span>
                            </div>
                            <div class="spec">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>250 km/h</span>
                            </div>
                        </div>
                        <div class="engine-info">
                            <h4>Engine Specifications</h4>
                            <ul>
                                <li>3.0L Inline-6 Hybrid</li>
                                <li>9G-Tronic Transmission</li>
                                <li>4MATIC All-Wheel Drive</li>
                            </ul>
                        </div>
                        <button class="test-drive-btn" data-car="Mercedes-Benz S-Class">
                            <i class="fas fa-car-side"></i> Book Test Drive
                        </button>
                    </div>
                    <div class="car-image">
                        <img src="https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?ixlib=rb-4.0.3" alt="Mercedes S-Class">
                    </div>
                </div>
            </div>

            <!-- Audi RS7 -->
            <div class="car-showcase-item">
                <div class="car-content">
                    <div class="car-info">
                        <h3>Audi RS7 Sportback</h3>
                        <div class="specs">
                            <div class="spec">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>600 HP</span>
                            </div>
                            <div class="spec">
                                <i class="fas fa-bolt"></i>
                                <span>800 Nm</span>
                            </div>
                            <div class="spec">
                                <i class="fas fa-stopwatch"></i>
                                <span>3.6s</span>
                            </div>
                            <div class="spec">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>280 km/h</span>
                            </div>
                        </div>
                        <div class="engine-info">
                            <h4>Engine Specifications</h4>
                            <ul>
                                <li>4.0L Twin-Turbo V8</li>
                                <li>8-Speed Tiptronic</li>
                                <li>Quattro All-Wheel Drive</li>
                            </ul>
                        </div>
                        <button class="test-drive-btn" data-car="Audi RS7 Sportback">
                            <i class="fas fa-car-side"></i> Book Test Drive
                        </button>
                    </div>
                    <div class="car-image">
                        <img src="https://www.nurcmedianext.com/vehicleImages/vehicle-image-RS7%20Sportback-audi-rs7-sportback.jpg" alt="Audi RS7">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Test Drive Booking Modal -->
    <div class="modal" id="testDriveModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="test-drive-container">
                <div class="test-drive-header">
                    <i class="fas fa-car-side"></i>
                    <h2>Book a Test Drive</h2>
                    <p>Experience the thrill of driving your dream car</p>
                </div>
                <form id="testDriveForm">
                    <div class="form-group">
                        <label for="selectedCar">Selected Car</label>
                        <input type="text" id="selectedCar" readonly>
                    </div>
                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input type="text" id="fullName" required placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" required placeholder="Enter your phone number">
                    </div>
                    <div class="form-group">
                        <label for="preferredDate">Preferred Date</label>
                        <input type="date" id="preferredDate" required>
                    </div>
                    <div class="form-group">
                        <label for="preferredTime">Preferred Time</label>
                        <select id="preferredTime" required>
                            <option value="">Select time slot</option>
                            <option value="09:00">09:00 AM</option>
                            <option value="10:00">10:00 AM</option>
                            <option value="11:00">11:00 AM</option>
                            <option value="14:00">02:00 PM</option>
                            <option value="15:00">03:00 PM</option>
                            <option value="16:00">04:00 PM</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="drivingLicense">Driving License Number</label>
                        <input type="text" id="drivingLicense" required placeholder="Enter your driving license number">
                    </div>
                    <div class="form-group">
                        <label for="additionalNotes">Additional Notes</label>
                        <textarea id="additionalNotes" placeholder="Any specific requirements or questions?"></textarea>
                    </div>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-paper-plane"></i> Book Test Drive
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div class="modal" id="searchModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="search-container">
                <div class="search-header">
                    <i class="fas fa-search"></i>
                    <h2>Search Cars</h2>
                </div>
                <div class="search-input-container">
                    <input type="text" id="searchInput" placeholder="Search by car name, brand, or model...">
                    <button id="searchButton" title="Search"><i class="fas fa-search"></i></button>
                </div>
                <div class="search-results" id="searchResults">
                    <!-- Search results will be displayed here -->
                </div>
            </div>
        </div>
    </div>

    <!-- footer section here  -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>AUTORVA</h3>
                    <p>Your premium destination for luxury and high-performance vehicles. Experience excellence in automotive selection.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Models</a></li>
                        <li><a href="#">Performance</a></li>
                        <li><a href="#">Gallery</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Car Booking Procedures</h4>
                    <ul>
                        <li><a href="#"><i class="fas fa-car"></i> Test Drive Booking</a></li>
                        <li><a href="#"><i class="fas fa-calendar-check"></i> Pre-Sale Booking</a></li>
                        <li><a href="#"><i class="fas fa-info-circle"></i> Booking Terms</a></li>
                        <li><a href="#"><i class="fas fa-file-contract"></i> Booking Agreement</a></li>
                        <li><a href="#"><i class="fas fa-question-circle"></i> Booking FAQ</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Pre-Sale Booking Information</h4>
                    <ul class="booking-info">
                        <li><i class="fas fa-money-bill-wave"></i> Minimum 10% of car value required</li>
                        <li><i class="fas fa-clock"></i> Booking valid for 30 days</li>
                        <li><i class="fas fa-shield-alt"></i> Fully refundable within 7 days</li>
                        <li><i class="fas fa-file-invoice"></i> Booking confirmation provided</li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Contact Us</h4>
                    <ul class="contact-info">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Auto Street, Car City</li>
                        <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
                        <li><i class="fas fa-envelope"></i> info@AUTORVA.com</li>
                    </ul>
                    <div class="newsletter">
                        <h4>Newsletter</h4>
                        <form class="newsletter-form">
                            <input type="email" placeholder="Enter your email" required>
                            <button type="submit" title="Subscribe to newsletter"><i class="fas fa-paper-plane"></i></button>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <p>&copy; 2024 AUTORVA. All rights reserved.</p>
                    <div class="footer-links">
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a>
                        <a href="#">Cookie Policy</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.7/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.7/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="script.js"></script>
    <script>
        // Initialize Swiper
        const carSwiper = new Swiper('.carSwiper', {
            slidesPerView: 1,
            spaceBetween: 30,
            loop: true,
            autoplay: {
                delay: 3000,
                disableOnInteraction: false,
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            breakpoints: {
                640: {
                    slidesPerView: 2,
                },
                1024: {
                    slidesPerView: 3,
                },
            },
        });

        // Scroll Animation
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.3
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.car-showcase-item').forEach(item => {
            observer.observe(item);
        });

        // Check if user is logged in
        function checkLoginStatus() {
            const userData = JSON.parse(localStorage.getItem('userData'));
            const loginBtn = document.getElementById('loginBtn');
            const profilePicContainer = document.querySelector('.profile-pic-container');
            const userInfo = document.querySelector('.user-info');
            const loginText = document.getElementById('loginText');
            const userIcon = loginBtn.querySelector('.fa-user');

            if (userData && userData.isLoggedIn) {
                // Update login button to show profile picture and user info
                profilePicContainer.style.display = 'block';
                userInfo.style.display = 'flex';
                document.getElementById('userProfilePic').src = userData.profilePic || 'https://via.placeholder.com/50';
                document.getElementById('userName').textContent = userData.name;
                document.getElementById('userEmail').textContent = userData.email;
                loginText.style.display = 'none';
                userIcon.style.display = 'none';
                
                // Change login button behavior
                loginBtn.href = '#';
                
                // Add click event to user info for logout
                userInfo.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (confirm('Do you want to logout?')) {
                        localStorage.removeItem('userData');
                        window.location.reload();
                    }
                });

                // Prevent profile picture container from triggering logout
                profilePicContainer.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            } else {
                // Reset to default login state
                profilePicContainer.style.display = 'none';
                userInfo.style.display = 'none';
                loginText.style.display = 'inline';
                userIcon.style.display = 'inline-block';
                loginBtn.href = 'login.html';
            }
        }

        // Handle profile picture upload
        document.getElementById('profilePicUpload').addEventListener('change', function(e) {
            e.stopPropagation(); // Prevent event bubbling
            const file = e.target.files[0];
            if (file) {
                // Check file type
                if (!file.type.startsWith('image/')) {
                    alert('Please select an image file');
                    return;
                }

                // Check file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    alert('Image size should be less than 5MB');
                    return;
                }

                const reader = new FileReader();
                
                reader.onloadstart = function() {
                    // Show loading state
                    const profilePic = document.getElementById('userProfilePic');
                    profilePic.style.opacity = '0.5';
                };

                reader.onload = function(e) {
                    try {
                        const userData = JSON.parse(localStorage.getItem('userData'));
                        userData.profilePic = e.target.result;
                        localStorage.setItem('userData', JSON.stringify(userData));
                        
                        const profilePic = document.getElementById('userProfilePic');
                        profilePic.src = e.target.result;
                        profilePic.style.opacity = '1';
                        
                        // Show success message
                        alert('Profile picture updated successfully!');
                    } catch (error) {
                        console.error('Error updating profile picture:', error);
                        alert('Error updating profile picture. Please try again.');
                    }
                };

                reader.onerror = function() {
                    alert('Error reading the file. Please try again.');
                };

                reader.readAsDataURL(file);
            }
        });

        // Check login status when page loads
        document.addEventListener('DOMContentLoaded', checkLoginStatus);

        // Test Drive Booking Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const testDriveBtns = document.querySelectorAll('.test-drive-btn');
            const testDriveModal = document.getElementById('testDriveModal');
            const testDriveForm = document.getElementById('testDriveForm');
            const selectedCarInput = document.getElementById('selectedCar');
            const closeModal = testDriveModal.querySelector('.close-modal');

            // Open modal when test drive button is clicked
            testDriveBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const carModel = btn.getAttribute('data-car');
                    selectedCarInput.value = carModel;
                    testDriveModal.style.display = 'block';
                });
            });

            // Close modal
            closeModal.addEventListener('click', () => {
                testDriveModal.style.display = 'none';
            });

            // Handle form submission
            testDriveForm.addEventListener('submit', function(e) {
                e.preventDefault();

                // Get form data
                const formData = {
                    car: selectedCarInput.value,
                    name: document.getElementById('fullName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    date: document.getElementById('preferredDate').value,
                    time: document.getElementById('preferredTime').value,
                    license: document.getElementById('drivingLicense').value,
                    notes: document.getElementById('additionalNotes').value
                };

                // Here you would typically send this data to your backend
                // For now, we'll just show a success message
                alert(`Thank you for booking a test drive!\n\nWe have received your request for the ${formData.car}.\nWe will contact you shortly at ${formData.phone} to confirm your appointment.`);

                // Close modal and reset form
                testDriveModal.style.display = 'none';
                testDriveForm.reset();
            });

            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === testDriveModal) {
                    testDriveModal.style.display = 'none';
                }
            });
        });

        // Search Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const searchBtn = document.querySelector('.search-btn');
            const searchModal = document.getElementById('searchModal');
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const searchResults = document.getElementById('searchResults');
            const closeModal = searchModal.querySelector('.close-modal');

            // Sample car data (you can replace this with your actual car data)
            const cars = [
                {
                    name: 'BMW M5 Competition',
                    brand: 'BMW',
                    model: 'M5',
                    year: 2024,
                    price: 120000,
                    image: 'https://imgd.aeplcdn.com/1920x1080/n/cw/ec/192747/m5-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80&q=80',
                    specs: {
                        horsepower: '617 HP',
                        torque: '750 Nm',
                        acceleration: '3.1s',
                        topSpeed: '305 km/h'
                    }
                },
                {
                    name: 'Mercedes-Benz S-Class',
                    brand: 'Mercedes',
                    model: 'S-Class',
                    year: 2024,
                    price: 110000,
                    image: 'https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?ixlib=rb-4.0.3',
                    specs: {
                        horsepower: '429 HP',
                        torque: '520 Nm',
                        acceleration: '4.9s',
                        topSpeed: '250 km/h'
                    }
                },
                {
                    name: 'Audi RS7 Sportback',
                    brand: 'Audi',
                    model: 'RS7',
                    year: 2024,
                    price: 125000,
                    image: 'https://www.nurcmedianext.com/vehicleImages/vehicle-image-RS7%20Sportback-audi-rs7-sportback.jpg',
                    specs: {
                        horsepower: '600 HP',
                        torque: '800 Nm',
                        acceleration: '3.6s',
                        topSpeed: '280 km/h'
                    }
                }
            ];

            // Open search modal
            searchBtn.addEventListener('click', () => {
                searchModal.style.display = 'block';
                searchInput.focus();
            });

            // Close modal
            closeModal.addEventListener('click', () => {
                searchModal.style.display = 'none';
                searchInput.value = '';
                searchResults.innerHTML = '';
            });

            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === searchModal) {
                    searchModal.style.display = 'none';
                    searchInput.value = '';
                    searchResults.innerHTML = '';
                }
            });

            // Search function
            function performSearch() {
                const searchTerm = searchInput.value.toLowerCase().trim();
                if (searchTerm === '') {
                    searchResults.innerHTML = '<p class="no-results">Please enter a search term</p>';
                    return;
                }

                const filteredCars = cars.filter(car => 
                    car.name.toLowerCase().includes(searchTerm) ||
                    car.brand.toLowerCase().includes(searchTerm) ||
                    car.model.toLowerCase().includes(searchTerm)
                );

                if (filteredCars.length === 0) {
                    searchResults.innerHTML = '<p class="no-results">No cars found matching your search</p>';
                    return;
                }

                searchResults.innerHTML = filteredCars.map(car => `
                    <div class="search-result-item">
                        <img src="${car.image}" alt="${car.name}">
                        <div class="search-result-content">
                            <h3>${car.name}</h3>
                            <p><strong>Brand:</strong> ${car.brand}</p>
                            <p><strong>Model:</strong> ${car.model}</p>
                            <p><strong>Year:</strong> ${car.year}</p>
                            <p><strong>Horsepower:</strong> ${car.specs.horsepower}</p>
                            <p><strong>Torque:</strong> ${car.specs.torque}</p>
                            <p><strong>0-100 km/h:</strong> ${car.specs.acceleration}</p>
                            <p><strong>Top Speed:</strong> ${car.specs.topSpeed}</p>
                            <p class="price">$${car.price.toLocaleString()}</p>
                            <button class="test-drive-btn" data-car="${car.name}">
                                <i class="fas fa-car-side"></i> Book Test Drive
                            </button>
                        </div>
                    </div>
                `).join('');

                // Add event listeners to test drive buttons in search results
                document.querySelectorAll('.search-result-item .test-drive-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const carModel = btn.getAttribute('data-car');
                        document.getElementById('selectedCar').value = carModel;
                        searchModal.style.display = 'none';
                        document.getElementById('testDriveModal').style.display = 'block';
                    });
                });
            }

            // Search on button click
            searchButton.addEventListener('click', performSearch);

            // Search on Enter key press
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        });
    </script>

    <style>
        .profile-pic-container {
            position: relative;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid #f9cb28;
            flex-shrink: 0;
            cursor: pointer;
        }

        .profile-pic-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .profile-pic-container:hover .profile-pic-overlay {
            opacity: 1;
        }

        .upload-btn {
            color: white;
            cursor: pointer;
            font-size: 1rem;
            transition: transform 0.3s ease;
            padding: 5px;
        }

        .upload-btn:hover {
            transform: scale(1.1);
        }

        #userProfilePic {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }

        /* Car Showcase Styles */
        .car-showcase {
            padding: 80px 0;
            background: #f8f9fa;
        }

        .showcase-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .car-showcase h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 40px;
            color: #333;
        }

        .carSwiper {
            padding: 20px 0;
        }

        .swiper-slide {
            background: #fff;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .swiper-slide:hover {
            transform: translateY(-10px);
        }

        .swiper-slide img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .slide-content {
            padding: 20px;
            text-align: center;
        }

        .slide-content h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #333;
        }

        .slide-content p {
            color: #666;
            font-size: 1.1rem;
        }

        .swiper-button-next,
        .swiper-button-prev {
            color: #f9cb28;
        }

        .swiper-pagination-bullet-active {
            background: #f9cb28;
        }

        @media (max-width: 768px) {
            .car-showcase {
                padding: 40px 0;
            }

            .car-showcase h2 {
                font-size: 2rem;
            }

            .swiper-slide img {
                height: 200px;
            }
        }

        /* Car Performance Styles */
        .car-performance {
            padding: 80px 0;
            background: linear-gradient(to bottom, #1a1a1a, #2d2d2d);
            color: #fff;
        }

        .performance-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .car-performance h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 40px;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .performance-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            overflow: hidden;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease;
        }

        .performance-card:hover {
            transform: translateY(-10px);
        }

        .car-image {
            height: 300px;
            overflow: hidden;
        }

        .car-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .performance-card:hover .car-image img {
            transform: scale(1.1);
        }

        .performance-details {
            padding: 30px;
        }

        .performance-details h3 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #f9cb28;
        }

        .specs-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .spec-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            transition: background 0.3s ease;
        }

        .spec-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .spec-item i {
            font-size: 1.5rem;
            color: #f9cb28;
        }

        .spec-info h4 {
            font-size: 0.9rem;
            color: #999;
            margin-bottom: 5px;
        }

        .spec-info p {
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
        }

        .engine-specs {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
        }

        .engine-specs h4 {
            color: #f9cb28;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .engine-specs ul {
            list-style: none;
            padding: 0;
        }

        .engine-specs li {
            color: #fff;
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .engine-specs li:before {
            content: "•";
            color: #f9cb28;
            position: absolute;
            left: 0;
        }

        .swiper-button-next,
        .swiper-button-prev {
            color: #f9cb28;
        }

        .swiper-pagination-bullet {
            background: #fff;
            opacity: 0.5;
        }

        .swiper-pagination-bullet-active {
            background: #f9cb28;
            opacity: 1;
        }

        @media (max-width: 768px) {
            .car-performance {
                padding: 40px 0;
            }

            .car-performance h2 {
                font-size: 2rem;
            }

            .specs-grid {
                grid-template-columns: 1fr;
            }

            .car-image {
                height: 200px;
            }

            .performance-details {
                padding: 20px;
            }

            .performance-details h3 {
                font-size: 1.5rem;
            }
        }

        /* Scroll Showcase Styles */
        .scroll-showcase {
            padding: 60px 0;
            background: #1a1a1a;
            color: #fff;
        }

        .showcase-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .scroll-showcase h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 40px;
            color: #f9cb28;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .car-showcase-item {
            margin-bottom: 100px;
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s ease;
        }

        .car-showcase-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .car-content {
            display: flex;
            align-items: center;
            gap: 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .car-info {
            flex: 1;
        }

        .car-info h3 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #f9cb28;
        }

        .specs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .spec {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            transition: background 0.3s ease;
        }

        .spec:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .spec i {
            font-size: 1.5rem;
            color: #f9cb28;
        }

        .spec span {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .engine-info {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
        }

        .engine-info h4 {
            color: #f9cb28;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .engine-info ul {
            list-style: none;
            padding: 0;
        }

        .engine-info li {
            color: #fff;
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .engine-info li:before {
            content: "•";
            color: #f9cb28;
            position: absolute;
            left: 0;
        }

        .car-image {
            flex: 1;
            height: 300px;
            border-radius: 15px;
            overflow: hidden;
        }

        .car-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .car-image:hover img {
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .car-content {
                flex-direction: column;
            }

            .car-image {
                width: 100%;
                height: 200px;
            }

            .specs {
                grid-template-columns: 1fr;
            }

            .car-info h3 {
                font-size: 1.5rem;
            }
        }

        /* Test Drive Button Styles */
        .test-drive-btn {
            background: #f9cb28;
            color: #1a1a1a;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .test-drive-btn:hover {
            background: #e6b825;
            transform: translateY(-2px);
        }

        .test-drive-btn i {
            font-size: 1.2rem;
        }

        /* Test Drive Modal Styles */
        .test-drive-container {
            padding: 20px;
        }

        .test-drive-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .test-drive-header i {
            font-size: 3rem;
            color: #f9cb28;
            margin-bottom: 15px;
        }

        .test-drive-header h2 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 10px;
        }

        .test-drive-header p {
            color: #666;
            font-size: 1.1rem;
        }

        #testDriveForm .form-group {
            margin-bottom: 20px;
        }

        #testDriveForm label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        #testDriveForm input,
        #testDriveForm select,
        #testDriveForm textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        #testDriveForm input:focus,
        #testDriveForm select:focus,
        #testDriveForm textarea:focus {
            border-color: #f9cb28;
            outline: none;
        }

        #testDriveForm textarea {
            height: 100px;
            resize: vertical;
        }

        #testDriveForm .submit-btn {
            background: #f9cb28;
            color: #1a1a1a;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        #testDriveForm .submit-btn:hover {
            background: #e6b825;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .test-drive-btn {
                width: 100%;
                justify-content: center;
            }

            .test-drive-header h2 {
                font-size: 1.5rem;
            }
        }

        /* Search Modal Styles */
        .search-container {
            padding: 20px;
        }

        .search-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .search-header i {
            font-size: 2.5rem;
            color: #f9cb28;
            margin-bottom: 15px;
        }

        .search-header h2 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 10px;
        }

        .search-input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        #searchInput {
            flex: 1;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            transition: border-color 0.3s ease;
        }

        #searchInput:focus {
            border-color: #f9cb28;
            outline: none;
        }

        #searchButton {
            background: #f9cb28;
            color: #1a1a1a;
            border: none;
            padding: 0 25px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #searchButton:hover {
            background: #e6b825;
        }

        #searchButton i {
            font-size: 1.2rem;
        }

        .search-results {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            max-height: 500px;
            overflow-y: auto;
            padding: 10px;
        }

        .search-result-item {
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .search-result-item:hover {
            transform: translateY(-5px);
        }

        .search-result-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .search-result-content {
            padding: 15px;
        }

        .search-result-content h3 {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 10px;
        }

        .search-result-content p {
            color: #666;
            margin-bottom: 5px;
        }

        .search-result-content .price {
            color: #f9cb28;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .search-results {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html> 